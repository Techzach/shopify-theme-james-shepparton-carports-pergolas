{%- render 'style-section' -%}
<div class="section-gallery enable-isotope customstyle{{ section.id }}">
  <div class="{{ section.settings.setwidth }}">
    {%- render 'section-heading' -%}

    <!-- Swiper Container -->
    <div class="swiper-container">
      <div class="swiper-wrapper">
        {%- for block in section.blocks -%}
        <div class="swiper-slide grid-item col-lg-3 col-md-4 col-sm-6 col-12" data-aos="{{ section.settings.animation }}">
          {%- if block.settings.image != blank -%}
          <div class="image-content__image-container">
            <a href="{{ block.settings.image | image_url: width: 1200 }}" class="gallery-item mb-3 image-content__image-wrapper fancybox" data-fancybox="gallery">
              {% assign img_url = block.settings.image | image_url: width: 400, height: 300, crop: 'center' %}
              <img 
                class="lazyload gallery-item__image" 
                src="{{ block.settings.image | image_url: width: 1, height: 1 }}" 
                data-src="{{ img_url }}"
                data-widths="[400, 800, 1200, 1600, 2000]"
                data-aspectratio="4/3"
                data-sizes="auto"
                loading="lazy"
                width="400"
                height="300" />
              <div class="gallery-item__title">
                {{ block.settings.title }}
              </div>
            </a>
          </div>
          {%- else -%}
          <div class="gallery-item mb-3">
            {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
          </div> 
          {%- endif -%}
        </div>
        {%- endfor -%}
      </div>
      <!-- Swiper Navigation -->
      <div class="swiper-pagination"></div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
    </div>
  </div>
</div>

<!-- Fancybox & Swiper Script -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  var swiper = new Swiper(".swiper-container", {
    slidesPerView: "auto",
    spaceBetween: 10,
    loop: true,
    autoplay: { delay: 3000, disableOnInteraction: false },
    navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
    pagination: { el: ".swiper-pagination", clickable: true }
  });

  Fancybox.bind(".fancybox", {
    Toolbar: {
      display: ["close"], // Close Button Added ✅
    },
    Thumbs: false, // No Thumbnail preview
    Arrows: true, // Next & Prev Arrows ✅
  });
});
</script>
