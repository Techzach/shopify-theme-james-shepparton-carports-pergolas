{% schema %}
{
  "name": "Gallery Carousel",
  "settings": [
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Image 1"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Image 2"
    },
    {
      "type": "image_picker",
      "id": "image_3",
      "label": "Image 3"
    }
  ],
  "presets": [
    {
      "name": "Gallery Carousel",
      "category": "Image"
    }
  ]
}
{% endschema %}

<div class="gallery-carousel">
  <div class="carousel-container">
    {% if section.settings.image_1 %}
      <div class="carousel-item"><img src="{{ section.settings.image_1 | img_url: 'large' }}" alt="Image 1"></div>
    {% endif %}
    {% if section.settings.image_2 %}
      <div class="carousel-item"><img src="{{ section.settings.image_2 | img_url: 'large' }}" alt="Image 2"></div>
    {% endif %}
    {% if section.settings.image_3 %}
      <div class="carousel-item"><img src="{{ section.settings.image_3 | img_url: 'large' }}" alt="Image 3"></div>
    {% endif %}
  </div>
  <button class="prev" onclick="moveSlide(-1)">&#10094;</button>
  <button class="next" onclick="moveSlide(1)">&#10095;</button>
</div>

<style>
  .gallery-carousel {
    position: relative;
    max-width: 100%;
    overflow: hidden;
  }
  .carousel-container {
    display: flex;
    transition: transform 0.5s ease-in-out;
  }
  .carousel-item {
    min-width: 100%;
    box-sizing: border-box;
  }
  img {
    width: 100%;
    height: auto;
  }
  .prev, .next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0,0,0,0.5);
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
  }
  .prev { left: 10px; }
  .next { right: 10px; }
</style>

<script>
  let currentIndex = 0;
  function moveSlide(direction) {
    const container = document.querySelector('.carousel-container');
    const items = document.querySelectorAll('.carousel-item');
    currentIndex += direction;
    if (currentIndex < 0) {
      currentIndex = items.length - 1;
    } else if (currentIndex >= items.length) {
      currentIndex = 0;
    }
    container.style.transform = `translateX(-${currentIndex * 100}%)`;
  }
</script>
